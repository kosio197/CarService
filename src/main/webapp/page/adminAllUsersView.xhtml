<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:body>
	<ui:composition template="template/layout.xhtml">
		<ui:define name="content">
             
            
         <p:messages id="messages" showDetail="true" autoUpdate="true" />
            <h1 align="center"> Registered Users</h1>
            <p:separator></p:separator>
         
         <h:form >   
           <p:dataTable  var="user" value="#{adminPanelUserManageBean.allUsers}" widgetVar="usersTable" 
                 emptyMessage="No userrs found with given criteria" filteredValue="#{adminPanelUserManageBean.filteredUsers}" 
                 editable="true" editMode="cell" >

               <f:facet name="header">
                    <p:outputPanel>
                        <h:outputText value="Search all fields: " />
                        <p:inputText id="globalFilter" onkeyup="PF('usersTable').filter()" style="width:200px" placeholder="Enter keyword"/>
                    </p:outputPanel>
                </f:facet>
                
               <p:separator></p:separator>
         
               <p:column headerText="Username">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.username}" /></f:facet>
                       <f:facet name="input"><p:inputText id="modelInput" value="#{user.username}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Password">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.password}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.password}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="First Name">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.firstName}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.firstName}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Last Name">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.lastName}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.lastName}"  /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Email">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.email}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{user.email}" > </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Telephone">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.telephone}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.telephone}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="ROLE">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.role}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.role}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               
              <!--   -->
               <p:column headerText="Last Visit">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.lastVisit}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{user.lastVisit}"> </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column>  
               <p:column headerText="Anual Check">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{car.anualCheckEndDate}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{car.anualCheckEndDate}"> </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column> 
               <p:column headerText="Liability Insuranse">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{car.liabilityInsuranseEndDate}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{car.liabilityInsuranseEndDate}"> </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column> 
               <p:column headerText="Full Insuranse">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{car.fullInsuranseEndDate}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{car.fullInsuranseEndDate}"> </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Vinnetes">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{car.vinnetesEndDate}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{car.vinnetesEndDate}" > </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column> 
               <p:column headerText="Last Visit">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{car.lastVisitDate}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{car.lastVisitDate}" > </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Owner">
                      <h:outputText value="#{adminPanelCarsManageBean.getOwnerName(car.ownerId)}" />
               </p:column> 


               Manage And Navigation 
               <p:column headerText="Car Repairs">
                 <p:commandButton  value="View" action="#{carManageBean.carInfoAndManage(car)}" ajax="false"/>
               </p:column>
               <p:column headerText="Save Change">
                 <p:commandButton  value="Save" action="#{adminPanelCarsManageBean.editCar(car)}" ajax="false"/>
               </p:column>
               
               <p:column headerText="*" style="width:20px" > *** </p:column>
               
               <p:column headerText="Delete Car">
                 <p:commandButton  value="Delete" action="#{adminPanelCarsManageBean.deleteCar(car)}" ajax="false"/>
               </p:column>

           </p:dataTable>
        </h:form>

			
		</ui:define>
	</ui:composition>
</h:body>
</html>