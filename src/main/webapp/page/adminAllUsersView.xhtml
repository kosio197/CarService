<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:body>
	<ui:composition template="template/layout.xhtml">
		<ui:define name="content">
             
            
         <p:messages id="messages" showDetail="true" autoUpdate="true" />
            <h1 align="center"> Registered Users</h1>
            <p:separator></p:separator>
         
         <h:form >   
           <p:dataTable  var="user" value="#{adminPanelUserManageBean.allUsers}" widgetVar="usersTable" 
                 emptyMessage="No userrs found with given criteria" editable="true" editMode="cell" >

               <f:facet name="header">
                    <p:outputPanel>
                        <h:outputText value="Search all fields: " />
                        <p:inputText id="globalFilter" onkeyup="PF('usersTable').filter()" style="width:200px" placeholder="Enter keyword"/>
                    </p:outputPanel>
                </f:facet>
                
               <p:separator></p:separator>
         
               <p:column headerText="Username" filterBy="#{user.username}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.username}" /></f:facet>
                       <f:facet name="input"><p:inputText id="modelInput" value="#{user.username}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Password" filterBy="#{user.password}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.password}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.password}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="First Name" filterBy="#{user.firstName}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.firstName}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.firstName}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Last Name" filterBy="#{user.lastName}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.lastName}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.lastName}"  /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Email" filterBy="#{user.email}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.email}" /></f:facet>
                       <f:facet name="input"><p:inputText  value="#{user.email}" /> </f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="Telephone" filterBy="#{user.telephone}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.telephone}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.telephone}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               <p:column headerText="ROLE" filterBy="#{user.role}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.role}" /></f:facet>
                       <f:facet name="input"><p:inputText value="#{user.role}" /></f:facet>
                   </p:cellEditor>
               </p:column>
               
              <!--   -->
               <p:column headerText="Last Visit" filterBy="#{user.lastVisit}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.lastVisit}" /></f:facet>
                       <f:facet name="input"><p:calendar value="#{user.lastVisit}"> </p:calendar></f:facet>
                   </p:cellEditor>
               </p:column>  
               <p:column headerText="Days to Event" filterBy="#{user.daysToEvent}" filterMatchMode="contains" filterStyle="display:none">
                   <p:cellEditor>
                       <f:facet name="output"><h:outputText value="#{user.daysToEvent}" /></f:facet>
                       <f:facet name="input"><p:inputNumber value="#{user.daysToEvent}"></p:inputNumber> </f:facet>
                   </p:cellEditor>
               </p:column> 

               <!-- Manage And Navigation  -->
               <p:column headerText="User Cars">
                 <p:commandButton  value="View" action="#{adminPanelUserManageBean.manageCars(user)}" ajax="false"/>
               </p:column>
               <p:column headerText="Save Change">
                 <p:commandButton  value="Save" action="#{adminPanelUserManageBean.editUser(user)}" ajax="false"/>
               </p:column>
               
               <p:column headerText="*" style="width:20px" > *** </p:column>
               
               <p:column headerText="Delete User">
                 <p:commandButton  value="Delete" action="#{adminPanelUserManageBean.deleteUser(user)}" ajax="false"/>
               </p:column>

           </p:dataTable>
        </h:form>

			
		</ui:define>
	</ui:composition>
</h:body>
</html>